{"ast":null,"code":"import _defineProperty from\"/Users/shengjiayu/Documents/GitHub/cs185-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/Users/shengjiayu/Documents/GitHub/cs185-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/shengjiayu/Documents/GitHub/cs185-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/shengjiayu/Documents/GitHub/cs185-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/shengjiayu/Documents/GitHub/cs185-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import config from'../config.js';var firebase=require('firebase');export var Form=/*#__PURE__*/function(_Component){_inherits(Form,_Component);var _super=_createSuper(Form);function Form(props){var _this;_classCallCheck(this,Form);_this=_super.call(this);_this.myFormHandler=function(event){event.preventDefault();if(_this.state.name===''){alert(\"Missing the following required field: name\");}else if(_this.state.msg===''){alert(\"Missing the following required field: message\");}else if(_this.state.visibility===''){alert(\"Missing the following required field: visibility\");}else{var formObj={name:_this.state.name,desc:_this.state.desc,msg:_this.state.msg,visibility:_this.state.visibility,email:_this.state.email,date:firebase.database.ServerValue.TIMESTAMP};firebase.database().ref('data').push().set(formObj);_this.setState({shouldUpdate:true});alert(\"Message successfully delivered!\");}_this.state={name:'',desc:'',msg:'',visibility:'private',email:'',shouldUpdate:false,data:[]};};_this.myChangeHandler=function(event){var field=event.target.name;var value=event.target.value;_this.setState(_defineProperty({},field,value));};_this.state={name:'',desc:'',msg:'',visibility:'private',email:'',shouldUpdate:false,data:[]};return _this;}_createClass(Form,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;document.title='Guest Message Form';if(!firebase.apps.length){firebase.initializeApp(config);}var ref=firebase.database().ref('data');ref.on('value',function(snapshot){var data=snapshot.val();var newData=[];var months=[\"Jan.\",\"Feb.\",\"Mar.\",\"Apr.\",\"May\",\"Jun.\",\"Jul.\",\"Aug.\",\"Sep.\",\"Oct.\",\"Nov.\",\"Dec.\"];for(var entry in data){var d=new Date(data[entry].date);var date=months[d.getMonth()]+\" \"+d.getDate()+\", \"+d.getFullYear()+\" (\"+d.getHours()+\":\"+d.getMinutes()+\":\"+d.getSeconds()+\")\";newData.push({id:entry,name:data[entry].name,desc:data[entry].desc,msg:data[entry].msg,visibility:data[entry].visibility,email:data[entry].email,date:date});}_this2.setState({data:newData});});}},{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps,prevState,snapshot){var _this3=this;if(this.state.shouldUpdate!==prevState.shouldUpdate){//same code as above to retrieve the data \nvar ref=firebase.database().ref('data');ref.on('value',function(snapshot){var data=snapshot.val();var newData=[];var months=[\"Jan.\",\"Feb.\",\"Mar.\",\"Apr.\",\"May\",\"Jun.\",\"Jul.\",\"Aug.\",\"Sep.\",\"Oct.\",\"Nov.\",\"Dec.\"];for(var entry in data){var d=new Date(data[entry].date);var date=months[d.getMonth()]+\" \"+d.getDate()+\", \"+d.getFullYear()+\" (\"+d.getHours()+\":\"+d.getMinutes()+\":\"+d.getSeconds()+\")\";newData.push({id:entry,name:data[entry].name,desc:data[entry].desc,msg:data[entry].msg,visibility:data[entry].visibility,email:data[entry].email,date:date});}_this3.setState({data:newData});});}}},{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"content\"},/*#__PURE__*/React.createElement(\"div\",{id:\"form-section\"},/*#__PURE__*/React.createElement(\"div\",{className:\"form\"},/*#__PURE__*/React.createElement(\"form\",{onSubmit:this.myFormHandler},/*#__PURE__*/React.createElement(\"h2\",null,\"Guest Message Form\"),/*#__PURE__*/React.createElement(\"span\",{className:\"note\"},\"You don't need to fill out fields marked by \",/*#__PURE__*/React.createElement(\"b\",null,\"*\"),\" \"),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"p\",null,\" Enter your name:\\xA0\",/*#__PURE__*/React.createElement(\"input\",{name:\"name\",placeholder:\"longer than 5 characters, less than 20\",type:\"text\",minLength:\"6\",maxLength:\"19\",required:true,onChange:this.myChangeHandler})),/*#__PURE__*/React.createElement(\"p\",null,/*#__PURE__*/React.createElement(\"b\",null,\"*\"),\"Give a brief description about yourself:\",/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"input\",{name:\"desc\",placeholder:\"less than 100 character\",type:\"text\",size:\"50\",maxLength:\"99\",onChange:this.myChangeHandler})),/*#__PURE__*/React.createElement(\"p\",null,\" Leave your message:\",/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"textarea\",{name:\"msg\",placeholder:\"longer than 15 characters, less than 500 characters\",minLength:\"16\",maxLength:\"499\",required:true,onChange:this.myChangeHandler})),/*#__PURE__*/React.createElement(\"p\",null,\" Would you like your name and message to be public to view?\",/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"input\",{type:\"radio\",id:\"yes\",name:\"visibility\",required:true,onChange:this.myChangeHandler,value:\"public\"}),/*#__PURE__*/React.createElement(\"label\",{for:\"yes\"},\"Yes\"),/*#__PURE__*/React.createElement(\"input\",{type:\"radio\",id:\"no\",name:\"visibility\",required:true,onChange:this.myChangeHandler,value:\"private\"}),/*#__PURE__*/React.createElement(\"label\",{for:\"no\"},\"No\")),/*#__PURE__*/React.createElement(\"p\",null,/*#__PURE__*/React.createElement(\"b\",null,\"*\"),\"Your email:\",/*#__PURE__*/React.createElement(\"input\",{name:\"email\",placeholder:\"...@examples.com\",type:\"text\",size:\"30\",onChange:this.myChangeHandler})),/*#__PURE__*/React.createElement(\"div\",null),/*#__PURE__*/React.createElement(\"div\",{className:\"submitButton\"},/*#__PURE__*/React.createElement(\"input\",{type:\"submit\",id:\"submit\",name:\"submit\",value:\"Submit\"})))),/*#__PURE__*/React.createElement(\"div\",{className:\"responses\"},/*#__PURE__*/React.createElement(\"h2\",{className:\"sections\"},\"Public Messages\"),this.state.data.map(function(entry){if(entry.visibility!=='private'){if(entry.desc!==''){return/*#__PURE__*/React.createElement(\"div\",{className:\"response\",id:entry.id},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"span\",{className:\"name\"},entry.name)),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"span\",{className:\"date\"},entry.date)),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"span\",null,/*#__PURE__*/React.createElement(\"span\",null,\"Writer's bio: \"),entry.desc),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"span\",{className:\"message\"},/*#__PURE__*/React.createElement(\"span\",null,\"Message: \"),entry.msg),/*#__PURE__*/React.createElement(\"br\",null));}else{return/*#__PURE__*/React.createElement(\"div\",{className:\"response\",id:entry.id},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"span\",{className:\"name\"},entry.name)),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"span\",{className:\"date\"},entry.date)),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"span\",{className:\"message\"},/*#__PURE__*/React.createElement(\"span\",null,\"Message: \"),entry.msg),/*#__PURE__*/React.createElement(\"br\",null));}}})))));}}]);return Form;}(Component);export default Form;","map":{"version":3,"sources":["/Users/shengjiayu/Documents/GitHub/cs185-react/src/Components/Form.js"],"names":["React","Component","config","firebase","require","Form","props","myFormHandler","event","preventDefault","state","name","alert","msg","visibility","formObj","desc","email","date","database","ServerValue","TIMESTAMP","ref","push","set","setState","shouldUpdate","data","myChangeHandler","field","target","value","document","title","apps","length","initializeApp","on","snapshot","val","newData","months","entry","d","Date","getMonth","getDate","getFullYear","getHours","getMinutes","getSeconds","id","prevProps","prevState","map"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport config from '../config.js';\nconst firebase = require('firebase')\n\nexport class Form extends Component {\n  constructor(props) {\n    super();\n    this.state = {\n      name: '',\n      desc: '',\n      msg: '',\n      visibility: 'private',\n      email: '',\n      shouldUpdate: false,\n      data: [],\n    }\n  }\n\n  componentDidMount(){\n    document.title = 'Guest Message Form';\n    if (!firebase.apps.length) {\n      firebase.initializeApp(config);\n    }\n    let ref = firebase.database().ref('data');\n    ref.on('value', snapshot => {\n      let data = snapshot.val();\n        let newData = [];\n        let months = [\"Jan.\", \"Feb.\", \"Mar.\", \"Apr.\", \"May\", \"Jun.\", \"Jul.\", \"Aug.\", \"Sep.\", \"Oct.\", \"Nov.\", \"Dec.\"];\n        for (let entry in data) {\n          let d = new Date(data[entry].date);\n          let date = months[d.getMonth()]+\" \"+d.getDate()+\", \"+d.getFullYear()+\" (\"+d.getHours()+\":\"+d.getMinutes()+\":\"+d.getSeconds()+\")\";\n          newData.push({\n            id: entry,\n            name: data[entry].name,\n            desc: data[entry].desc,\n            msg: data[entry].msg,\n            visibility: data[entry].visibility,\n            email: data[entry].email,\n            date: date,\n          })\n        }\n        this.setState({data: newData});\n    })\n  }\n\n  componentDidUpdate(prevProps, prevState, snapshot){\n    if(this.state.shouldUpdate !== prevState.shouldUpdate){\n      //same code as above to retrieve the data \n      let ref = firebase.database().ref('data');\n      ref.on('value', snapshot => {\n        let data = snapshot.val();\n        let newData = [];\n        let months = [\"Jan.\", \"Feb.\", \"Mar.\", \"Apr.\", \"May\", \"Jun.\", \"Jul.\", \"Aug.\", \"Sep.\", \"Oct.\", \"Nov.\", \"Dec.\"];\n        for (let entry in data) {\n          let d = new Date(data[entry].date);\n          let date = months[d.getMonth()]+\" \"+d.getDate()+\", \"+d.getFullYear()+\" (\"+d.getHours()+\":\"+d.getMinutes()+\":\"+d.getSeconds()+\")\";\n          newData.push({\n            id: entry,\n            name: data[entry].name,\n            desc: data[entry].desc,\n            msg: data[entry].msg,\n            visibility: data[entry].visibility,\n            email: data[entry].email,\n            date: date,\n          })\n        }\n        this.setState({data: newData});\n      })\n    }\n  }\n\n  myFormHandler = (event) => {\n    event.preventDefault();\n    if (this.state.name === '') {\n      alert(\"Missing the following required field: name\");\n    } else if (this.state.msg === '') {\n      alert(\"Missing the following required field: message\");\n    } else if (this.state.visibility === '') {\n      alert(\"Missing the following required field: visibility\");\n    } else {\n      let formObj = {\n        name: this.state.name, \n        desc: this.state.desc,\n        msg: this.state.msg,\n        visibility: this.state.visibility,\n        email: this.state.email,\n        date: firebase.database.ServerValue.TIMESTAMP,\n      };\n      firebase.database().ref('data').push().set(formObj);\n      this.setState({shouldUpdate: true});\n      alert(\"Message successfully delivered!\");\n    }\n    this.state = {\n      name: '',\n      desc: '',\n      msg: '',\n      visibility: 'private',\n      email: '',\n      shouldUpdate: false,\n      data: [],\n    }\n  }\n\n  myChangeHandler = (event) => {\n    let field = event.target.name;\n    let value = event.target.value;\n    this.setState({[field]: value});\n  }\n\n  render() {\n    return (\n      <div>\n        <div className='content'>\n          <div id='form-section'>\n            <div className='form'>\n            <form onSubmit={this.myFormHandler}>\n              <h2>Guest Message Form</h2>\n              <span className='note'>You don't need to fill out fields marked by <b>*</b> </span><br></br>\n              \n              <p> Enter your name:&nbsp;\n              <input name='name' placeholder=\"longer than 5 characters, less than 20\" type='text' minLength='6' maxLength='19' required onChange={this.myChangeHandler} /></p>\n              <p><b>*</b>Give a brief description about yourself:<br/>\n              <input name='desc' placeholder=\"less than 100 character\" type='text' size='50' maxLength='99' onChange={this.myChangeHandler}/>\n              </p>\n              <p> Leave your message:<br/>\n                <textarea name='msg' placeholder=\"longer than 15 characters, less than 500 characters\" minLength='16' maxLength='499' required onChange={this.myChangeHandler}></textarea>\n              </p>\n              <p> Would you like your name and message to be public to view?<br/>\n                  <input type=\"radio\" id=\"yes\" name=\"visibility\" required onChange={this.myChangeHandler} value='public'/>\n\t\t\t            <label for=\"yes\">Yes</label>\n\t\t\t\t\t\t\t    <input type=\"radio\" id=\"no\" name=\"visibility\" required onChange={this.myChangeHandler} value='private'/>\n\t\t\t\t\t\t\t    <label for=\"no\">No</label>\n            \n              </p>\n              <p><b>*</b>Your email:\n              <input name='email' placeholder=\"...@examples.com\" type='text' size='30' onChange={this.myChangeHandler}/>\n              </p>\n              <div>\n              \n              \n              </div>\n              \n\n              <div className='submitButton'>\n                <input type='submit' id='submit' name='submit' value='Submit'></input>\n              </div>\n            </form>\n            </div>\n            <div className='responses'>\n              <h2 className = 'sections'>Public Messages</h2>\n              {this.state.data.map((entry) => {\n                if(entry.visibility !== 'private') {\n                  if(entry.desc !== '') {\n                    return (\n                      <div className='response' id={entry.id}>\n                        <div>\n                          <span className='name'>{entry.name}</span>\n                         \n                        </div>\n                        \n                        <div>\n                          \n                          <span className='date'>{entry.date}</span>\n                        </div>\n                        <br></br>\n                        <span><span>Writer's bio: </span>{entry.desc}</span><br/>\n                        <span className='message'><span>Message: </span>{entry.msg}</span><br/>\n                      </div>\n                    )\n                  } else {\n                    return (\n                      <div className='response' id={entry.id}>\n                        <div>\n                          <span className='name'>{entry.name}</span>\n                         \n                        </div>\n                        <div>\n                        \n                          <span className='date'>{entry.date}</span>\n                        </div>\n                        <br></br>\n                        <span className='message'><span>Message: </span>{entry.msg}</span><br/>\n                      </div>\n                    )\n                  }\n                }\n              })}\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\nexport default Form;"]},"metadata":{},"sourceType":"module"}